<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons - Text-to-Speech</title>
    <link rel="stylesheet" href="../static/css/styles2.css">
</head>

<body>
    <div class="navbar">
        <ul>
            <div class="logo">
                <img src="../static/img/ublogo.png" alt="University Logo">
            </div>
            <li><a href="/">Home</a></li>
            <li><a href="/">Contact</a></li>
            <li><a href="/">Req</a></li>

            <li><a href="/lessons">Lessons</a></li>
            <li><a href="/">About</a></li>
            <li><a href="/">Us</a></li>
        </ul>
    </div>

    <div class="container">
        <h1>Text-to-Speech (TTS) - Lesson 1</h1>

        <p id="para1">
            Text-to-Speech (TTS) technology converts written text into spoken language. TTS is used in various
            applications such as navigation systems, virtual assistants, and accessibility tools for visually impaired
            individuals.
        </p>

        <p id="para2">
            The process of converting text to speech involves analyzing the text, determining how the words are
            pronounced, and generating audio that mimics natural speech patterns. Advances in AI have made TTS systems
            more realistic.
        </p>

        <p id="para3">
            TTS systems can synthesize speech in different languages and accents, offering greater versatility. It is
            becoming an essential part of technology and user experiences, enhancing accessibility and engagement.
        </p>

        <!-- Dropdown for voice selection -->
        <label for="voiceSelect">Choose Voice:</label>
        <select id="voiceSelect"></select>

        <!-- Button to trigger speech -->
        <button id="readBtn">Read Lesson Aloud</button>

        <!-- Pause button -->
        <button id="pauseBtn" disabled>Pause</button>

        <!-- Navigation -->
        <div class="navigation">
            <a href="/lessons">1</a> |
            <a href="/lessons2">2</a>
        </div>
    </div>

    <script>
        let speechSynthesisUtterance;
        let voices = [];
        let isPaused = false;
        let isSpeaking = false;

        // Load available voices
        function loadVoices() {
            voices = window.speechSynthesis.getVoices();
            voices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = voice.name;
                document.getElementById('voiceSelect').appendChild(option);
            });
        }

        // Read text with speech synthesis
        function readText() {
            let selectedVoiceIndex = document.getElementById('voiceSelect').value;
            let selectedVoice = voices[selectedVoiceIndex];
            let paragraphs = [document.getElementById('para1'), document.getElementById('para2'), document.getElementById('para3')];
            let textToRead = paragraphs.map(p => p.innerText).join(' ');

            speechSynthesisUtterance = new SpeechSynthesisUtterance(textToRead);
            speechSynthesisUtterance.voice = selectedVoice;

            // On end of speech reset UI
            speechSynthesisUtterance.onend = function () {
                isSpeaking = false;
                document.getElementById('pauseBtn').disabled = true;
                document.getElementById('readBtn').disabled = false;
            };

            // Start speaking
            isSpeaking = true;
            window.speechSynthesis.speak(speechSynthesisUtterance);
            document.getElementById('readBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
        }

        // Pause/Resume speech synthesis
        function togglePauseResume() {
            if (!isPaused) {
                window.speechSynthesis.pause();
                document.getElementById('pauseBtn').textContent = 'Resume';
            } else {
                window.speechSynthesis.resume();
                document.getElementById('pauseBtn').textContent = 'Pause';
            }
            isPaused = !isPaused;
        }

        // Stop speech synthesis when navigating away or refreshing
        window.addEventListener('beforeunload', function () {
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel(); // Stop any ongoing speech when leaving
            }
        });

        // Handle page load events
        document.addEventListener('DOMContentLoaded', function () {
            if (window.speechSynthesis) {
                window.speechSynthesis.onvoiceschanged = loadVoices;
            }

            // Attach event listeners to buttons
            document.getElementById('readBtn').addEventListener('click', readText);
            document.getElementById('pauseBtn').addEventListener('click', togglePauseResume);
        });
    </script>
</body>

</html>