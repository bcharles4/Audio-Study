<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons - Text-to-Speech</title>
    <link rel="stylesheet" href="../static/css/styles2.css">
</head>

<body>
    <div class="navbar">
        <ul>
            <div class="logo">
                <img src="../static/img/ublogo.png" alt="University Logo">
            </div>
            <li><a href="/">Home</a></li>
            <li><a href="/convert">Convert</a></li>
            <li><a href="/lesson">Lessons</a></li>
        </ul>
    </div>

    <div class="container">
        <h1>Chapter 1 - Labor Law</h1>

        <p id="para1">
            Isang kahig, isang tuka...a meek characterization commonly tagged to most Filipino laborers, to portray the
            daily plight
            of an ordinary worker whose hands act as nothing more than a conduit of the money he earns, from his
            paycheck towards
            the overwhelming expenses that he and his family has to incur in order to withstand the survival-driven
            society that we
            are in. Therefore, he would most likely concern himself solely on receiving the monetary equivalent of the
            services that
            he has and will be rendering for another person. However, more than just wages and bonuses, his/her labor
            rights
            comprehend a wider array of benefits and remunerations than what is being extended to him/her - much less
            he/she is
            being made aware of.
        </p>

        <p id="para2">
            So the first question we have to address before we go wobbly with technical terms and legal jargons as
            regards
            employment rights and duties is: what is labor law? It is a law that governs the rights and duties of
            employers and
            employees, with respect to the following:
            1. terms and conditions of employment
            2. labor disputes arising from collective bargaining respecting such terms and conditions
        </p>

        <p id="para3">
            From the above-mentioned definition, two major divisions of Labor Law were formulated - the first one is
            Labor Standard
            laws, while the second is Labor Relations laws. The former deals primarily with the minimum standards of
            labor, such as
            wages, hours of work and other terms and conditions; the latter deals with how the employer-employee
            relations serves as
            the foundation for resorting to legal and peaceful means of resolving any dispute or disagreement arising
            from the terms
            and conditions of employment.
        </p>

        <!-- Dropdown for voice selection -->
        <label for="voiceSelect">Choose Voice:</label>
        <select id="voiceSelect"></select>
        <br><br>
        <button id="readBtn">Read Lesson Aloud</button>
        <button id="pauseBtn" disabled>Pause</button>
        <button id="stopBtn" disabled>Stop</button>

        <!-- Navigation -->
        <div class="navigation">
            <a href="/laborlaw1">1</a> |
            <a href="/laborlaw2">2</a> |
            <a href="/laborlaw3">3</a> |
            <a href="/laborlaw4">4</a> |
            <a href="/laborlaw5">5</a>
        </div>
    </div>

    <script>
        let speechSynthesisUtterance;
        let voices = [];
        let isPaused = false;

        // Load available voices
        function loadVoices() {
            voices = window.speechSynthesis.getVoices();
            voices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = voice.name;
                document.getElementById('voiceSelect').appendChild(option);
            });
        }

        // Read text with speech synthesis
        function readText() {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();  // Cancel any ongoing speech
            }

            let selectedVoiceIndex = document.getElementById('voiceSelect').value;
            let selectedVoice = voices[selectedVoiceIndex];
            let paragraphs = [document.getElementById('para1'), document.getElementById('para2'), document.getElementById('para3')];
            let textToRead = paragraphs.map(p => p.innerText).join(' ');

            speechSynthesisUtterance = new SpeechSynthesisUtterance(textToRead);
            speechSynthesisUtterance.voice = selectedVoice;

            speechSynthesisUtterance.onend = function () {
                document.getElementById('pauseBtn').disabled = true;
                document.getElementById('stopBtn').disabled = true;
                document.getElementById('readBtn').disabled = false;
            };

            speechSynthesis.speak(speechSynthesisUtterance);
            document.getElementById('readBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
            document.getElementById('stopBtn').disabled = false;
        }

        // Pause/Resume speech synthesis
        function togglePauseResume() {
            if (!isPaused) {
                speechSynthesis.pause();
                document.getElementById('pauseBtn').textContent = 'Resume';
            } else {
                speechSynthesis.resume();
                document.getElementById('pauseBtn').textContent = 'Pause';
            }
            isPaused = !isPaused;
        }

        // Stop speech synthesis completely
        function stopSpeech() {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            document.getElementById('readBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('pauseBtn').textContent = 'Pause';
            isPaused = false;
        }

        // Stop speech synthesis when navigating away or refreshing
        window.addEventListener('beforeunload', function () {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
        });

        // Handle page load events
        document.addEventListener('DOMContentLoaded', function () {
            if (window.speechSynthesis) {
                window.speechSynthesis.onvoiceschanged = loadVoices;
            }
            document.getElementById('readBtn').addEventListener('click', readText);
            document.getElementById('pauseBtn').addEventListener('click', togglePauseResume);
            document.getElementById('stopBtn').addEventListener('click', stopSpeech);
        });
    </script>
</body>

</html>
