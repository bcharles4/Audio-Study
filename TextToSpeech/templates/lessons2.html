<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons - Speech-to-Text</title>
    <link rel="stylesheet" href="../static/css/styles2.css">
</head>

<body>
    <div class="navbar">
        <ul>
            <div class="logo">
                <img src="../static/img/ublogo.png" alt="University Logo">
            </div>
            <li><a href="/">Home</a></li>
            <li><a href="/">Contact</a></li>
            <li><a href="/">Req</a></li>

            <li><a href="/lessons">Lessons</a></li>
            <li><a href="/">About</a></li>
            <li><a href="/">Us</a></li>
        </ul>
    </div>

    <div class="container">
        <h1>Speech-to-Text (STT) - Lesson 2</h1>

        <p id="para1">
            Speech-to-Text (STT) technology converts spoken language into written text. This technology is widely used
            in transcription software, virtual assistants like Siri and Google Assistant, and accessibility tools for
            the hearing impaired.
        </p>

        <p id="para2">
            The process involves using voice recognition algorithms that capture audio, analyze the sound patterns, and
            map them to phonetic and linguistic data. Over time, STT technology has improved, allowing for highly
            accurate real-time transcription.
        </p>

        <p id="para3">
            Advances in machine learning and artificial intelligence have played a crucial role in the improvement of
            STT systems. Today, STT systems can accurately transcribe speech from multiple languages, accents, and even
            dialects, making them a powerful tool in various industries.
        </p>

        <!-- Dropdown for voice selection -->
        <label for="voiceSelect">Choose Voice:</label>
        <select id="voiceSelect"></select>

        <!-- Button to trigger speech -->
        <button id="readBtn">Read Lesson Aloud</button>

        <!-- Pause button -->
        <button id="pauseBtn" disabled>Pause</button>

        <!-- Navigation -->
        <div class="navigation">
            <a href="/lessons">1</a> |
            <a href="/lessons2">2</a>
        </div>
    </div>

    <script>
        let speechSynthesisUtterance;
        let voices = [];
        let isPaused = false;
        let isSpeaking = false;

        // Load available voices
        function loadVoices() {
            voices = window.speechSynthesis.getVoices();
            voices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = voice.name;
                document.getElementById('voiceSelect').appendChild(option);
            });
        }

        // Read text with speech synthesis
        function readText() {
            let selectedVoiceIndex = document.getElementById('voiceSelect').value;
            let selectedVoice = voices[selectedVoiceIndex];
            let paragraphs = [document.getElementById('para1'), document.getElementById('para2'), document.getElementById('para3')];
            let textToRead = paragraphs.map(p => p.innerText).join(' ');

            speechSynthesisUtterance = new SpeechSynthesisUtterance(textToRead);
            speechSynthesisUtterance.voice = selectedVoice;

            // On end of speech reset UI
            speechSynthesisUtterance.onend = function () {
                isSpeaking = false;
                document.getElementById('pauseBtn').disabled = true;
                document.getElementById('readBtn').disabled = false;
            };

            // Start speaking
            isSpeaking = true;
            window.speechSynthesis.speak(speechSynthesisUtterance);
            document.getElementById('readBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
        }

        // Pause/Resume speech synthesis
        function togglePauseResume() {
            if (!isPaused) {
                window.speechSynthesis.pause();
                document.getElementById('pauseBtn').textContent = 'Resume';
            } else {
                window.speechSynthesis.resume();
                document.getElementById('pauseBtn').textContent = 'Pause';
            }
            isPaused = !isPaused;
        }

        // Stop speech synthesis when navigating away or refreshing
        window.addEventListener('beforeunload', function () {
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel(); // Stop any ongoing speech when leaving
            }
        });

        // Handle page load events
        document.addEventListener('DOMContentLoaded', function () {
            if (window.speechSynthesis) {
                window.speechSynthesis.onvoiceschanged = loadVoices;
            }

            // Attach event listeners to buttons
            document.getElementById('readBtn').addEventListener('click', readText);
            document.getElementById('pauseBtn').addEventListener('click', togglePauseResume);
        });
    </script>
</body>

</html>